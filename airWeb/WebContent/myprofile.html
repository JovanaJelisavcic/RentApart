<!DOCTYPE html>
<html>
<head>
<title>My Profile</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
 <script src="http://malsup.github.com/jquery.form.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" ></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" >
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" ></script>
<script type="text/javascript">
$(document).ready(function() {
$.ajax({
	url : "rest/currentUser",
	type: "GET",
	contentType: 'application/json',
	success: function (response) {
	    $('#username').text("@"+response.username);
	    $('#fullname').text(response.firstName+" "+response.lastName);
	    $('#role').text(response.role);
	    $('#firstname').attr('value', response.firstName);
	    $('#lastname').attr('value', response.lastName);
	    if(response.sex == "male"){
	    	$("[name=gender]").val(["male"]);}
	    else {$("[name=gender]").val(["female"]);}
    },
    error: function (response) {
    	alert("Unsuccessful load of personal data. Check your connection!");
    }
});
});
</script>
<!-- this might be a place to put a call for data  -->
<style>
body{
    margin-top:20px;
    background:#f8f8f8
}
form .error {
  color: #ff0000;
}
</style>
</head>
<body>
<div class="container">
<div class="row flex-lg-nowrap">
   <div class="col">
    <div class="row">
      <div class="col mb-3">
        <div class="card">
          <div class="card-body">
            <div class="e-profile">
              <div class="row">
                <div class="col-12 col-sm-auto mb-3">
                  <div class="mx-auto" style="width: 140px;">
                    <div class="d-flex justify-content-center align-items-center rounded" style="height: 140px; background-color: rgb(233, 236, 239);">
                        <img width="140" height="140" src="alfred.jpeg">
                    </div>
                  </div>
                </div>
                <div class="col d-flex flex-column flex-sm-row justify-content-between mb-3">
                  <div class="text-center text-sm-left mb-2 mb-sm-0">
                    <h4 id="fullname" class="pt-sm-2 pb-1 mb-0 text-nowrap">John Smith</h4>
                    <p id="username" class="mb-0">@johnny.s</p>
                  </div>
                  <div class="text-center text-sm-right">
                    <span id="role" class="badge badge-secondary">administrator</span>
                  </div>
                </div>
              </div>
              <ul class="nav nav-tabs">
                <li class="nav-item"><a href="" class="active nav-link">Settings</a></li>
              </ul>
              <div class="tab-content pt-3">
                <div class="tab-pane active">
                  <form class="form" name="changeProfile" novalidate="">
                    <div class="row">
                      <div class="col">
                        <div class="row">
                          <div class="col">
                            <div class="form-group">
                              <label>Name</label>
                              <input class="form-control" type="text" name="firstname" id="firstname" >
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-group">
                              <label>Surname</label>
                              <input class="form-control" type="text" name="lastname" id="lastname" >
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <div class="form-group">                             
                              <label style="margin:5px;" class="radio inline"> 
                                    <input type="radio" name="gender" id="male" value="male" >
                                    <span> Male </span> 
                              </label>
                              <label style="margin:5px;" class="radio inline"> 
                                    <input type="radio" name="gender" id="female" value="female" checked>
                                    <span>Female </span> 
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12 col-sm-6 mb-3">
                        <div class="mb-2"><b>Change Password</b></div>
                        <div class="row">
                          <div class="col">
                            <div class="form-group">
                              <label>Current Password</label>
                              <input class="form-control" type="password" id="password" name="password" placeholder="••••••">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <div class="form-group">
                              <label>New Password</label>
                              <input class="form-control" type="password" id="newpassword" name="newpassword" placeholder="••••••">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <div class="form-group">
                              <label>Confirm <span class="d-none d-xl-inline">Password</span></label>
                              <input class="form-control" type="password" id="confirmpassword" name="confirmpassword" placeholder="••••••"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col d-flex justify-content-end">
                        <button class="btn btn-primary" style="margin:5px; background-color:#D3D3D3; border-color:#D3D3D3 " type="button" onclick="location.href = 'app.html';">Go Back</button>
                        <button class="btn btn-primary" style="margin:5px;" type="submit">Save Changes</button>
                      </div>
                    </div>
                  </form>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<script src="profileValid.js"></script>
</body>
</html>